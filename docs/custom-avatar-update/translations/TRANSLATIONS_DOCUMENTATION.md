# Translations Documentation

This document contains all translations managed from the CMS, including accessibility labels for screen readers and regular UI text translations for the avatar/theme selection screens, custom avatar page, tutorial modal, naming modal, celebration modal, and profile page updates.

## CMS Management

**Important**: All translations (accessibility labels + regular UI text) are now **managed from the CMS** in a unified system.

### How It Works

1. **CMS Database**: Translations are stored in the `translations` table with columns:
   - `id` (UUID)
   - `key` (string) - The translation key (e.g., `select_avatar_button`, `customizer_clothing_dress1`)
   - `label` (string) - The translated text
   - `type` (string) - **Translation type**: `'accessibility'` for screen reader labels, `'ui'` for regular UI text
   - `live` (boolean) - Whether the translation is active
   - `lang` (string) - Language code (e.g., `en`, `fr`, `es`, `pt`, `ru`)

### Identifying Translation Types in CMS

**How to distinguish between screen reader labels and regular UI text:**

1. **In the CMS Admin Interface** (`/translation-management`):
   - The **Type** column displays a badge:
     - **"Screen Reader"** (blue badge) = Accessibility label (used with `useAccessibilityLabel()` hook)
     - **"UI Text"** (gray badge) = Regular UI text (used with `useTranslate()` hook)

2. **When Adding/Editing Translations**:
   - A dropdown menu allows you to select the type:
     - **"UI Text"** - For regular text displayed on screen (clothing items, devices, colors, tutorial texts)
     - **"Accessibility Label (Screen Reader)"** - For screen reader announcements (button labels, input descriptions)

3. **Translation Key Patterns** (for reference):
   - **Accessibility Labels** (34 keys): Usually end with `_button`, `_input`, `_link`, `_label`, or are action words like `continue`, `confirm`, `close`
   - **UI Text** (82 keys): Usually start with `customizer_` followed by category (e.g., `customizer_clothing_*`, `customizer_device_*`, `customizer_skin_color_*`)

4. **Usage in App**:
   - **Accessibility labels** (`type: 'accessibility'`): Used via `useAccessibilityLabel()` hook for `accessibilityLabel` props
   - **UI text** (`type: 'ui'`): Used via `useTranslate()` hook for regular text display

2. **CMS Admin Interface**: 
   - Access via `/translation-management` in the CMS
   - Translations are filtered by the logged-in user's language
   - Each language has its own set of translations
   - To add translations for other languages, switch your CMS user's language or use different users
   - **Type column** shows whether a translation is for screen readers or regular UI text
   - **Type dropdown** in add/edit modal allows you to specify the translation type

3. **Mobile API Endpoint**: 
   - `/mobile/translations/{locale}` - Returns all live translations for the specified locale
   - Used by the app to fetch translations dynamically
   - Includes both accessibility labels and regular UI text translations

4. **App Implementation**:
   - **Hook for Accessibility**: `app/src/hooks/useAccessibilityLabel.ts` retrieves translations from CMS first, then falls back to app translations
   - **Hook for UI Text**: `app/src/hooks/useTranslate.ts` prioritizes CMS translations, then falls back to app translations
   - **Redux State**: Translations are stored in `content.translations` after fetching
   - **Fallback Mechanism**: If a translation is not found in CMS or the API fails, the app falls back to static translations in `app/src/resources/translations/app/{locale}.ts`
   - **Offline Support**: Static content files (generated by `fetchContent.ts`) include translations for offline use

5. **Static Content Generation**:
   - **Script**: `fetchContent.ts` fetches translations from CMS and includes them in static TypeScript files
   - **Command**: `yarn fetch-content` regenerates static content files
   - **Purpose**: Provides offline fallback when CMS is unavailable

### Updating Translations

**For CMS Administrators**:
1. Log into the CMS admin interface
2. Navigate to "Translations" in the sidebar
3. Select your language (translations are filtered by language)
4. Add, edit, or delete translations as needed
5. Set `live` to `true` to activate a translation, `false` to deactivate
6. Translations are automatically available to the app on next content refresh

**For Developers**:
1. To add new translations:
   - Add the translation to all language files in `app/src/resources/translations/app/{locale}.ts` (for fallback)
   - Run the SQL migration or manually insert into the database
   - Update the CMS admin interface if needed
2. To update existing translations:
   - Update in CMS (preferred - no app release needed)
   - Or update in translation files and run `yarn fetch-content` (requires app release)
3. To regenerate static content:
   - Run `yarn fetch-content` to update offline fallback files

---

## Step-by-Step Guide: Updating CMS-Managed Translations

This section provides detailed instructions for updating translations that are managed from the CMS for an app already published on the Play Store.

### What Can Be Updated from CMS (No App Update Required)

The following content can be updated from CMS **without** releasing a new app version:

1. **Translations** (`/mobile/translations/{locale}`)
   - **Accessibility Labels**: All screen reader labels for buttons, inputs, and interactive elements
     - Example: "Select avatar", "Previous page", "Save and continue"
   - **UI Text Translations**: Clothing items, devices, colors, tutorial texts
     - Example: "Dress 1", "Glasses", "Light pink", "How to create your Oky friend"
   - **Total**: 116 translation keys (34 accessibility labels + 82 UI text translations)

2. **Avatar Messages** (`/mobile/avatar-messages/{locale}`)
   - Random messages displayed on the main screen
   - Example: "Keep tracking your period days!"

3. **Other CMS Content** (existing):
   - Articles, Videos, Quizzes, Did You Knows
   - Help Centers, Privacy Policy, Terms & Conditions
   - About content

### What CANNOT Be Updated from CMS (Requires App Update)

The following content **requires** a new app release:

- **App Structure**: New screens, features, components
- **Code Changes**: Bug fixes, new functionality
- **New Translation Keys**: Adding new translation keys requires code changes and app release (but updating existing keys can be done from CMS)

### Step-by-Step Process: Updating CMS-Managed Translations

#### Scenario: You want to change a translation from "Select avatar" to "Choose your avatar"

**Step 1: Update Content in CMS**

1. **Access your CMS Admin Panel**
   - Navigate to the "Translations" management section (unified translations menu)
   - Or use the CMS API directly: `PUT/POST /mobile/translations/{locale}`

2. **Find the Translation to Update**
   - Locate the translation with key: `select_avatar_button`
   - Current value: "Select avatar"
   - New value: "Choose your avatar"

3. **Update the Label**
   - Change the `label` field for the `select_avatar_button` key
   - Ensure `live: true` is set (so it's active)
   - Ensure `lang: "{locale}"` matches the target locale (e.g., "en", "fr", "es")

4. **Save/Publish the Changes**
   - Save the changes in CMS
   - Verify the API endpoint returns the updated value:
     ```bash
     curl https://cms.okyapp.info/mobile/translations/en
     ```

**Step 2: Verify CMS Update (Optional but Recommended)**

1. **Test the API Endpoint**
   ```bash
   # Test English
   curl https://cms.okyapp.info/mobile/translations/en | grep select_avatar_button
   
   # Test other locales if needed
   curl https://cms.okyapp.info/mobile/translations/fr | grep select_avatar_button
   ```

2. **Verify Response Format**
   - Should return JSON array with objects containing:
     - `key`: "select_avatar_button"
     - `label`: "Choose your avatar" (your new value)
     - `lang`: "en"
     - `live`: true

**Step 3: Update Static Content Files (For Offline Fallback)**

**Important**: This step does NOT update the database - the database is already updated in Step 1 via CMS. This step updates the static TypeScript files that serve as offline fallback when CMS is unavailable.

1. **Navigate to Project Root**
   ```bash
   cd /path/to/periodtracker
   ```

2. **Compile Core Package** (if needed)
   ```bash
   yarn workspace @oky/core compile
   ```

3. **Update fetchContent.ts**
   - Edit `fetchContent.ts` if you need to change locale or CMS URL
   - Default: `locale = 'en'`, `cms_url = 'https://cms.okyapp.info/'`

4. **Run the Fetch Script**
   ```bash
   # Use the yarn script (recommended)
   yarn fetch-content
   
   # Or manually with ts-node
   npx ts-node --transpile-only fetchContent.ts
   ```

5. **Verify Generated File**
   - Check `app/src/resources/translations/content/en.ts`
   - Verify `translations` contains your updated value:
     ```typescript
     translations: {
       "select_avatar_button": "Choose your avatar",
       // ... other labels
     }
     ```

6. **Repeat for Other Locales** (if needed)
   - Change `locale` in `fetchContent.ts` to `'fr'`, `'es'`, `'pt'`, `'ru'`, etc.
   - Run the script again for each locale

7. **Commit and Push Changes** (Optional - for version control)
   
   **Note**: This step is only for:
   - Version controlling the static fallback files
   - Including updated translations in future app builds
   - Tracking changes in git history
   
   ```bash
   git add app/src/resources/translations/content/
   git commit -m "Update static translation fallback files from CMS"
   git push
   ```
   
   **When to skip**: If you only need to update CMS and don't care about version controlling the static files, you can skip this step. Users will still get the updates from CMS when they open the app.

**Step 4: How Users Get the Update**

**No app update required!** The app automatically fetches new content:

1. **On App Launch**
   - When the app starts, it fetches translations directly from CMS database (`/mobile/translations/{locale}`)
   - Currently, `fetchInterval = 0`, so it fetches **every time** the app launches
   - Content is fetched from CMS database (updated in Step 1) and stored in Redux state
   - **The git commit (Step 7) is NOT needed for users to get updates** - they get it directly from CMS

2. **On Locale Change**
   - If user changes language, content is immediately fetched for the new locale

3. **Fallback Behavior**
   - If CMS fetch fails (network error, API down), app uses static content from `app/src/resources/translations/content/{locale}.ts`
   - This is why Step 3 (updating static files) is important

**Step 5: Testing the Update**

1. **Test on Development Build**
   - Clear app data/cache
   - Launch app
   - Verify the new translation appears

2. **Test on Production**
   - Wait for users to open the app (they'll automatically fetch new content)
   - Or force a content refresh by clearing app data

3. **Verify Different Locales**
   - Test with different language settings
   - Ensure all locales have the updated translation

### Complete Example: Updating Multiple Translations

**Scenario**: Update 3 translations for English locale

1. **Update in CMS**:
   - `select_avatar_button`: "Choose your avatar" (was "Select avatar")
   - `previous_page_button`: "Go back" (was "Previous page")
   - `save_and_continue_button`: "Save & Continue" (was "Save and continue")

2. **Run fetchContent.ts**:
   ```bash
   # Set locale = 'en' in fetchContent.ts
   yarn fetch-content
   ```

3. **Verify in generated file**:
   ```typescript
   // app/src/resources/translations/content/en.ts
   translations: {
     "select_avatar_button": "Choose your avatar",
     "previous_page_button": "Go back",
     "save_and_continue_button": "Save & Continue",
     // ... other labels
   }
   ```

4. **Commit and push** (Optional - for version control only):
   ```bash
   git add app/src/resources/translations/content/en.ts
   git commit -m "Update static translation fallback files: Choose your avatar, Go back, Save & Continue"
   git push
   ```
   
   **Important**: This git commit does NOT update the database. The database was already updated in Step 1 via CMS.

5. **Users automatically get the update** on next app launch!

### Troubleshooting

**Issue: Changes not appearing in app**

**Possible Causes**:
1. **CMS not updated**: Verify the API endpoint returns the new value
2. **App cache**: Clear app data/cache and relaunch
3. **Network issue**: App might be using stale content (offline fallback)
4. **Wrong locale**: Ensure you updated the correct locale in CMS

**Solutions**:
- Check CMS API response directly
- Clear app data and relaunch
- Verify `live: true` is set in CMS
- Check network connectivity

**Issue: App shows old translation**

**Possible Causes**:
1. **Static content not updated**: The offline fallback file still has old value
2. **CMS fetch failed**: App is using stale content from previous fetch

**Solutions**:
- Update static content files (Step 3)
- Ensure CMS API is accessible
- Check app logs for fetch errors

**Issue: Some users see new translation, others don't**

**Possible Causes**:
1. **Gradual rollout**: Users who haven't opened the app yet still have old content cached
2. **Network issues**: Some users' devices can't reach CMS

**Solutions**:
- This is normal - users will get the update when they next open the app
- Ensure static content files are updated for offline fallback

### Best Practices

1. **Always Update Static Files**: Even though CMS is the source of truth, update static files for offline fallback
2. **Test Before Publishing**: Test CMS changes in a staging environment first
3. **Version Control**: Commit static content file updates to track changes
4. **Document Changes**: Keep a changelog of CMS translation updates
5. **Monitor API**: Set up monitoring for CMS API endpoints to catch issues early
6. **Batch Updates**: If updating multiple labels, do them in one CMS update session

### Summary

**For CMS-Managed Translations (Unified Translations, Avatar Messages)**:

✅ **No app update required**  
✅ **Update in CMS database** (Step 1) → **Users get it automatically on next app launch**  
✅ **Works immediately** - users fetch directly from CMS database when they open the app  
✅ **Optional**: Update static files (Step 3) for offline fallback  
✅ **Optional**: Git commit (Step 7) for version control (does NOT update database)

**Important Clarifications**:
- **Step 1 (CMS Update)**: This is what actually updates the database and what users get
- **Step 3 (Static Files)**: Only for offline fallback - not required for users to get updates
- **Step 7 (Git Commit)**: Only for version control - does NOT update database or affect users

**For New Translation Keys** (adding new keys, not updating existing ones):

❌ **Requires app update** (new Play Store release)  
❌ **Must add** new keys to `app/src/resources/translations/app/{locale}.ts`  
❌ **Must add** to SQL migration or CMS manually  
❌ **Users must update** the app from Play Store

**Note**: Once a translation key exists in the system, it can be updated from CMS without an app release. Only adding completely new translation keys requires an app update.

---

### Running the SQL Migration

**File**: `sql/1760000000000-create-translations-table.sql`

**How to Run**:

**Option 1: Using Adminer (Recommended for Development)**
1. Access your Adminer interface (typically at `http://localhost:8080` or your CMS admin URL)
2. Select your database (`periodtracker`)
3. Navigate to the SQL command section
4. Copy and paste the contents of `sql/1760000000000-create-translations-table.sql`
5. Execute the SQL script
6. Verify the `translations` table was created and populated (should have 580 rows: 116 keys × 5 languages)

**Option 2: Using psql (Command Line)**
```bash
# Connect to your PostgreSQL database
psql -h localhost -U periodtracker -d periodtracker

# Run the migration file
\i sql/1760000000000-create-translations-table.sql
```

**Option 3: Using Docker (if running in containers)**
```bash
# Copy SQL file into container and execute
docker cp sql/1760000000000-create-translations-table.sql periodtracker-postgres-1:/tmp/
docker exec -i periodtracker-postgres-1 psql -U periodtracker -d periodtracker < /tmp/1760000000000-create-translations-table.sql
```

**Important Notes:**
- The migration enables the `uuid-ossp` extension (required for PostgreSQL 10)
- For PostgreSQL 13+, you can modify the file to use `gen_random_uuid()` instead of `uuid_generate_v4()`
- The migration is idempotent (safe to run multiple times - uses `ON CONFLICT DO NOTHING`)
- After running, verify the table exists: `SELECT COUNT(*) FROM periodtracker.translations;` (should return 580)

### Important Notes

- **Unified System**: Both accessibility labels (for screen readers) and regular UI text translations (clothing items, devices, colors, tutorial texts) are managed from the same CMS table
- **Language Filtering**: Each language maintains its own set of translations in the CMS
- **Fallback Priority**: CMS translations → Static content → App translations → Translation key (as-is)
- **Initial Population**: The SQL migration `1760000000000-create-translations-table.sql` creates the table and populates it with all 116 translation keys from app translation files (116 keys × 5 languages = 580 entries):
  - 34 accessibility label keys
  - 11 tutorial text keys
  - 17 clothing item keys
  - 25 device/personal item keys
  - 12 skin color keys
  - 11 hair color keys
  - 6 eye color keys

## Table of Contents
1. [CMS Management](#cms-management)
2. [Step-by-Step Guide: Updating CMS-Managed Translations](#step-by-step-guide-updating-cms-managed-translations)
3. [Avatar Selection Screen](#avatar-selection-screen)
4. [Theme Selection Screen](#theme-selection-screen)
5. [Custom Avatar Page (Customizer)](#custom-avatar-page-customizer)
6. [Tutorial Modal](#tutorial-modal)
7. [Naming Modal](#naming-modal)
8. [Celebration Modal (Friend Unlock)](#celebration-modal-friend-unlock)
9. [Profile Page](#profile-page)
10. [Translation Keys Reference](#translation-keys-reference)

---

## Avatar Selection Screen

### Elements with Accessibility Labels

1. **Avatar Selection Buttons**
   - **Label**: `select_avatar_button: {translatedAvatarName}, {status}`
   - **Status values**:
     - `{translatedAvatarName} locked` - When friend avatar is locked
     - `{translatedAvatarName}, tap to customize` - When friend avatar is unlocked and can be customized
     - `{translatedAvatarName}, selected` - When avatar is currently selected
     - `{translatedAvatarName}, tap to select` - When avatar is not selected
   - **Implementation**: Uses translated avatar names via `translate(avatar)` which includes `themeTranslations`
   - **Example**: "Select avatar: Аяна, selected" (for Russian) or "Select avatar: ari, selected" (for English)
   - **Translation Key**: `select_avatar_button`
   - **✅ Status**: Avatar names are now translated using the existing `themeTranslations` system. Note: Some languages (like Russian) have translated names (e.g., "Аяна" for "ari"), while others use the technical names.

2. **Continue Button** (Initial Selection)
   - **Label**: `continue`
   - **Translation Key**: `continue`
   - **English**: "continue"

3. **Confirm Button** (Non-Initial Selection)
   - **Label**: `confirm`
   - **Translation Key**: `confirm`
   - **English**: "confirm"

---

## Theme Selection Screen

### Elements with Accessibility Labels

1. **Theme Selection Buttons**
   - **Label**: `select_theme_button: {translatedThemeName}, {status}`
   - **Status values**:
     - `{translatedThemeName}, selected` - When theme is currently selected
     - `{translatedThemeName}, tap to select` - When theme is not selected
   - **Implementation**: Uses translated theme names via `translate(theme)` which includes `themeTranslations`
   - **Example**: "Select theme: Collines, selected" (for French) or "Select theme: hills, selected" (for English)
   - **Translation Key**: `select_theme_button`
   - **✅ Status**: Theme names are now translated using the existing `themeTranslations` system. All languages have translated theme names (e.g., "Collines" for "hills" in French, "Холмы" for "hills" in Russian, "Montanhas" for "hills" in Portuguese, "Montañas" for "hills" in Spanish).

2. **Continue Button** (Initial Selection)
   - **Label**: `continue`
   - **Translation Key**: `continue`
   - **English**: "continue"

3. **Confirm Button** (Non-Initial Selection)
   - **Label**: `confirm`
   - **Translation Key**: `confirm`
   - **English**: "confirm"

4. **Arrow Button** (Header back button)
   - **Label**: `arrow_button`
   - **Translation Key**: `arrow_button`
   - **English**: "Arrow button"

---

## Custom Avatar Page (Customizer)

### Category Tabs

1. **Category Selection Buttons**
   - **Label**: `select_category_button: {categoryName}, {status}`
   - **Status values**:
     - `selected` - When category is currently selected
     - `tap to select` - When category is not selected
   - **Example**: "Select category: Skin, selected"
   - **Translation Key**: `select_category_button`

### Skin Color Section

1. **Previous Page Button**
   - **Label**: `previous_page_button`
   - **Translation Key**: `previous_page_button`
   - **English**: "Previous page"

2. **Next Page Button**
   - **Label**: `next_page_button`
   - **Translation Key**: `next_page_button`
   - **English**: "Next page"

3. **Color Swatch Buttons**
   - **Label**: `select_color_button: skin color {colorName}, {status}`
   - **Status values**:
     - `selected` - When color is currently selected
     - `tap to select` - When color is not selected
   - **Implementation**: Uses translated color names via `translate('customizer_skin_color_*')`
   - **Example**: "Select color: skin color Light pink, selected"
   - **Translation Key**: `select_color_button`
   - **✅ Status**: Color names are now translated. Available skin colors: Light pink, Peach, Beige, Tan, Dark brown, Light tan, Medium brown, Cream, Bronze, Ivory, Sand, Caramel

### Body Type Section

1. **Body Type Selection Buttons**
   - **Label**: `select_option_button: body type {bodyType}, {status}`
   - **Status values**:
     - `selected` - When body type is currently selected
     - `tap to select` - When body type is not selected
   - **Example**: "Select option: body type body-medium, selected"
   - **Translation Key**: `select_option_button`

### Hair Section

1. **Previous Page Button** (Hair Color)
   - **Label**: `previous_page_button`
   - **Translation Key**: `previous_page_button`
   - **English**: "Previous page"

2. **Next Page Button** (Hair Color)
   - **Label**: `next_page_button`
   - **Translation Key**: `next_page_button`
   - **English**: "Next page"

3. **Hair Color Swatch Buttons**
   - **Label**: `select_color_button: hair color {colorName}, {status}`
   - **Status values**:
     - `selected` - When color is currently selected
     - `tap to select` - When color is not selected
   - **Implementation**: Uses translated color names via `translate('customizer_hair_color_*')`
   - **Example**: "Select color: hair color Black, selected"
   - **Translation Key**: `select_color_button`
   - **✅ Status**: Color names are now translated. Available hair colors: Black, Brown, Red, Blonde, Green, Pink, Orange, Purple, Dark brown, Bright orange, Blue

4. **Previous Page Button** (Hair Style)
   - **Label**: `previous_page_button`
   - **Translation Key**: `previous_page_button`
   - **English**: "Previous page"

5. **Next Page Button** (Hair Style)
   - **Label**: `next_page_button`
   - **Translation Key**: `next_page_button`
   - **English**: "Next page"

6. **Hair Style Selection Buttons**
   - **Label**: `select_option_button: hairstyle {hairStyle}, {status}`
   - **Status values**:
     - `selected` - When hair style is currently selected
     - `tap to select` - When hair style is not selected
   - **Example**: "Select option: hairstyle short, selected"
   - **Translation Key**: `select_option_button`

### Eyes Section

1. **Previous Page Button** (Eye Color)
   - **Label**: `previous_page_button`
   - **Translation Key**: `previous_page_button`
   - **English**: "Previous page"

2. **Next Page Button** (Eye Color)
   - **Label**: `next_page_button`
   - **Translation Key**: `next_page_button`
   - **English**: "Next page"

3. **Eye Color Swatch Buttons**
   - **Label**: `select_color_button: eye color {colorName}, {status}`
   - **Status values**:
     - `selected` - When color is currently selected
     - `tap to select` - When color is not selected
   - **Implementation**: Uses translated color names via `translate('customizer_eye_color_*')`
   - **Example**: "Select color: eye color Brown, selected"
   - **Translation Key**: `select_color_button`
   - **✅ Status**: Color names are now translated. Available eye colors: Black, Brown, Hazel, Green, Blue, Gray

4. **Previous Page Button** (Eye Shape)
   - **Label**: `previous_page_button`
   - **Translation Key**: `previous_page_button`
   - **English**: "Previous page"

5. **Next Page Button** (Eye Shape)
   - **Label**: `next_page_button`
   - **Translation Key**: `next_page_button`
   - **English**: "Next page"

6. **Eye Shape Selection Buttons**
   - **Label**: `select_option_button: eye shape {eyeShape}, {status}`
   - **Status values**:
     - `selected` - When eye shape is currently selected
     - `tap to select` - When eye shape is not selected
   - **Example**: "Select option: eye shape round, selected"
   - **Translation Key**: `select_option_button`

### Clothing Section

1. **Previous Page Button**
   - **Label**: `previous_page_button`
   - **Translation Key**: `previous_page_button`
   - **English**: "Previous page"

2. **Next Page Button**
   - **Label**: `next_page_button`
   - **Translation Key**: `next_page_button`
   - **English**: "Next page"

3. **Clothing Selection Buttons**
   - **Label**: `select_option_button: clothing {translatedClothingItem}, {status}`
   - **Status values**:
     - `selected` - When clothing item is currently selected
     - `tap to select` - When clothing item is not selected
   - **Implementation**: Uses translated names via `translate('customizer_clothing_{item}')`
   - **Example**: "Select option: clothing Dress 1, selected"
   - **Translation Key**: `select_option_button`
   - **✅ Status**: Individual clothing item names are now translated using translation keys.
   - **Available Clothing Items** (with translation keys):
     - `customizer_clothing_dress1`: "Dress 1"
     - `customizer_clothing_dress2`: "Dress 2"
     - `customizer_clothing_dress3`: "Dress 3"
     - `customizer_clothing_longdressbelt`: "Long dress with belt"
     - `customizer_clothing_shortandshirt1`: "Shorts and shirt 1"
     - `customizer_clothing_shortandshirt2`: "Shorts and shirt 2"
     - `customizer_clothing_shortandshirt3`: "Shorts and shirt 3"
     - `customizer_clothing_skirtandshirt`: "Skirt and shirt"
     - `customizer_clothing_shirtandpants`: "Shirt and pants"
     - `customizer_clothing_blazer1`: "Blazer 1"
     - `customizer_clothing_blazer2`: "Blazer 2"
     - `customizer_clothing_jumper`: "Jumper"
     - `customizer_clothing_cape`: "Cape"
     - `customizer_clothing_hijab`: "Hijab"
     - `customizer_clothing_longuniform`: "Long uniform"
     - `customizer_clothing_traditional1`: "Traditional outfit 1"
     - `customizer_clothing_traditional2`: "Traditional outfit 2"
     - `customizer_clothing_traditional3`: "Traditional outfit 3"
     - `customizer_clothing_traditional4`: "Traditional outfit 4"
     - `customizer_clothing_traditional5`: "Traditional outfit 5"

### Personal Items Section

1. **Previous Page Button**
   - **Label**: `previous_page_button`
   - **Translation Key**: `previous_page_button`
   - **English**: "Previous page"

2. **Next Page Button**
   - **Label**: `next_page_button`
   - **Translation Key**: `next_page_button`
   - **English**: "Next page"

3. **Personal Item Selection Buttons**
   - **Label**: `select_option_button: personal item {translatedItemName}, {status}`
   - **Status values**:
     - `selected` - When personal item is currently selected
     - `tap to select` - When personal item is not selected
   - **Implementation**: Uses translated names via `translate('customizer_device_{item}')`
   - **Example**: "Select option: personal item Glasses, selected"
   - **Translation Key**: `select_option_button`
   - **✅ Status**: Individual personal item names are now translated using translation keys.
   - **Available Personal Items** (with translation keys):
     - `customizer_device_glasses`: "Glasses"
     - `customizer_device_readingglasses2`: "Reading glasses"
     - `customizer_device_darkglasses`: "Dark glasses"
     - `customizer_device_sunglass1`: "Sunglasses 1"
     - `customizer_device_sunglass2`: "Sunglasses 2"
     - `customizer_device_crown`: "Crown"
     - `customizer_device_hat`: "Hat"
     - `customizer_device_beanie`: "Beanie"
     - `customizer_device_beanie2`: "Beanie 2"
     - `customizer_device_buckethat`: "Bucket hat"
     - `customizer_device_cap`: "Cap"
     - `customizer_device_sunhat`: "Sun hat"
     - `customizer_device_headband`: "Headband"
     - `customizer_device_head`: "Head accessory"
     - `customizer_device_flowers`: "Flowers"
     - `customizer_device_bandana`: "Bandana"
     - `customizer_device_headphones`: "Headphones"
     - `customizer_device_necklace1`: "Necklace 1"
     - `customizer_device_necklace2`: "Necklace 2"
     - `customizer_device_necklace3`: "Necklace 3"
     - `customizer_device_earings`: "Earrings"
     - `customizer_device_purse`: "Purse"
     - `customizer_device_cane`: "Cane"
     - `customizer_device_prostetic1`: "Prosthetic 1"
     - `customizer_device_prostetic2`: "Prosthetic 2"

### Bottom Action Buttons

1. **Tutorial Button**
   - **Label**: `tutorial_button`
   - **Translation Key**: `tutorial_button`
   - **English**: "Tutorial"

2. **Close Tooltip Button**
   - **Label**: `close_tooltip_button`
   - **Translation Key**: `close_tooltip_button`
   - **English**: "Close tooltip"

3. **Exit Button**
   - **Label**: `customizer_exit`
   - **Translation Key**: `customizer_exit`
   - **English**: "Exit"

4. **Save Friend Button**
   - **Label**: `customizer_save_friend`
   - **Translation Key**: `customizer_save_friend`
   - **English**: "Save your Oky friend"

---

## Tutorial Modal

### Elements with Accessibility Labels

1. **Back Arrow Button** (Header)
   - **Label**: `arrow_button`
   - **Translation Key**: `arrow_button`
   - **English**: "Arrow button"

2. **Tutorial Step Titles**
   - **Label**: Dynamic based on step content
   - **Translation Keys**:
     - Step 1: `customizer_tutorial_step1_title` - "Start creating your Oky friend!"
     - Step 2: `customizer_tutorial_step2_title` - "Select colors"
     - Step 3: `customizer_tutorial_step3_title` - "Look at more options"
     - Step 4: `customizer_tutorial_step4_title` - "Personal items"
     - Step 5: `customizer_tutorial_step5_title` - "Done?"

3. **Tutorial Step Text**
   - **Label**: Dynamic based on step content
   - **Translation Keys**:
     - Step 1: `customizer_tutorial_step1_text`
     - Step 2: `customizer_tutorial_step2_text`
     - Step 3: `customizer_tutorial_step3_text`
     - Step 4: `customizer_tutorial_step4_text`
     - Step 5: `customizer_tutorial_step5_text`

4. **Back Button** (Navigation)
   - **Label**: `customizer_tutorial_back`
   - **Translation Key**: `customizer_tutorial_back`
   - **English**: "Back"

5. **Next/Finish Button** (Navigation)
   - **Label**: 
     - `customizer_tutorial_next` (for steps 1-4)
     - `customizer_tutorial_finish` (for step 5)
   - **Translation Keys**:
     - `customizer_tutorial_next` - "Next"
     - `customizer_tutorial_finish` - "Finish"

6. **Skip Tutorial Button**
   - **Label**: `skip_tutorial_button`
   - **Translation Key**: `skip_tutorial_button`
   - **English**: "Skip tutorial"

---

## Naming Modal

### Elements with Accessibility Labels

1. **Name Input Field**
   - **Label**: `name_input`
   - **Translation Key**: `name_input`
   - **English**: "Enter your friend's name"
   - **Role**: `text`

2. **Character Count Text**
   - **Label**: Dynamic - Shows character count (e.g., "5/08 characters")
   - **Note**: This is displayed as text, not a separate accessibility label

3. **Hint Text**
   - **Label**: "Remember you can change this later."
   - **Note**: This is displayed as text, not a separate accessibility label

4. **Skip Button**
   - **Label**: `skip_name_button`
   - **Translation Key**: `skip_name_button`
   - **English**: "Skip naming"

5. **Save and Continue Button**
   - **Label**: `save_and_continue_button`
   - **Translation Key**: `save_and_continue_button`
   - **English**: "Save and continue"

6. **Modal Close Button** (via Modal component)
   - **Label**: `close`
   - **Translation Key**: `close`
   - **English**: "Close"

---

## Celebration Modal (Friend Unlock)

### Elements with Accessibility Labels

1. **Modal Title**
   - **Label**: `friend_unlock_modal_title`
   - **Translation Key**: `friend_unlock_modal_title`
   - **English**: "Hooray! All 3 locks are open, you can create your own Oky friend now."

2. **Celebration Image**
   - **Label**: `friend_unlock_celebration_image`
   - **Translation Key**: `friend_unlock_celebration_image`
   - **English**: "Celebration animation showing unlocked friend avatar feature"
   - **Role**: `image`

3. **Create Friend Button**
   - **Label**: `friend_unlock_modal_button`
   - **Translation Key**: `friend_unlock_modal_button`
   - **English**: "Create your new Oky friend!"
   - **Role**: `button`

4. **Modal Close Button** (via Modal component)
   - **Label**: `close`
   - **Translation Key**: `close`
   - **English**: "Close"

---

## Profile Page

### Elements with Accessibility Labels

**Note**: The Profile Page sections (Change your Oky friend, Change the name, Change the background) currently use standard TouchableOpacity components. These sections may benefit from explicit accessibility labels in future updates.

---

## Translation Keys Reference

### Unified Translations System

**All Translation Keys** (116 keys - managed in CMS):
- **Accessibility Label Keys** (34 keys): Used for screen reader accessibility labels
  - Examples: `select_avatar_button`, `select_option_button`, `select_color_button`
- **UI Text Translation Keys** (82 keys): Used for regular UI text
  - Tutorial texts (11 keys): `customizer_tutorial_title`, `customizer_tutorial_step1_title`, etc.
  - Clothing items (17 keys): `customizer_clothing_dress1`, `customizer_clothing_dress2`, etc.
  - Devices (25 keys): `customizer_device_glasses`, `customizer_device_hat`, etc.
  - Skin colors (12 keys): `customizer_skin_color_light_pink`, `customizer_skin_color_peach`, etc.
  - Hair colors (11 keys): `customizer_hair_color_black`, `customizer_hair_color_brown`, etc.
  - Eye colors (6 keys): `customizer_eye_color_black`, `customizer_eye_color_brown`, etc.

**Storage**: All translations are stored in the unified `translations` table in CMS

**Usage**: 
- Accessibility labels are used via `useAccessibilityLabel()` hook
- UI text translations are used via `useTranslate()` hook (which prioritizes CMS translations)
- Both hooks fall back to app translations if not found in CMS

**Note**: All 116 translation keys are now managed from CMS and can be updated without app releases.

---

### Translation Keys (116 keys - CMS-managed)

#### Accessibility Label Keys (34 keys)

| Translation Key | English Value |
|----------------|---------------|
| `select_avatar_button` | "Select avatar" |
| `select_theme_button` | "Select theme" |
| `select_color_button` | "Select color" |
| `select_option_button` | "Select option" |
| `select_category_button` | "Select category" |
| `previous_page_button` | "Previous page" |
| `next_page_button` | "Next page" |
| `close_tooltip_button` | "Close tooltip" |
| `tutorial_button` | "Tutorial" |
| `skip_tutorial_button` | "Skip tutorial" |
| `name_input` | "Enter your friend's name" |
| `skip_name_button` | "Skip naming" |
| `save_and_continue_button` | "Save and continue" |
| `arrow_button` | "Arrow button" |
| `continue` | "continue" |
| `confirm` | "confirm" |
| `close` | "Close" |
| `customizer_exit` | "Exit" |
| `customizer_save_friend` | "Save your Oky friend" |
| `customizer_tutorial_back` | "Back" |
| `customizer_tutorial_next` | "Next" |
| `customizer_tutorial_finish` | "Finish" |
| `customizer_tutorial_title` | "How to create your Oky friend" |
| `customizer_tutorial_step1_title` | "Start creating your Oky friend!" |
| `customizer_tutorial_step1_text` | "Tap the buttons (Body, Hair, Eyes, Clothes and Personal items) to create your own friend.\n\nYou can move between buttons and see changes right away" |
| `customizer_tutorial_step2_title` | "Select colors" |
| `customizer_tutorial_step2_text` | "Tap the color buttons to change the skin, hair or eye color.\n\nUse the arrows or swipe to see more options. Tap to choose a color." |
| `customizer_tutorial_step3_title` | "Look at more options" |
| `customizer_tutorial_step3_text` | "To see more options, use the arrows or swipe for more colors." |
| `customizer_tutorial_step4_title` | "Personal items" |
| `customizer_tutorial_step4_text` | "Add one or more personal items for your Oky friend." |
| `customizer_tutorial_step5_title` | "Done?" |
| `customizer_tutorial_step5_text` | "Tap 'Save your friend' to save your changes.\nTap 'Exit' to exit. Your last change will not be saved.\n\nDon't worry, you can always come back and change your Oky friend." |
| `friend_unlock_modal_title` | "Hooray! All 3 locks are open, you can create your own Oky friend now." |
| `friend_unlock_modal_button` | "Create your new Oky friend!" |
| `friend_unlock_celebration_image` | "Celebration animation showing unlocked friend avatar feature" |
| `name_info_label` | "The name you will use to sign in to Oky. Minimum 3 characters" |
| `privacy_policy_link` | "Link to the  Privacy Policy for Oky" |
| `t_and_c_link` | "Link to the  Privacy Policy for Oky" |
| `i_agree` | "I agree" |
| `month_selector` | "month selector" |
| `search_country` | "search country" |
| `clear_search` | "Clear search" |
| `info_button` | "information button" |
| `accessibility_prompt` | "Double tap to activate" |

**Total: 34 accessibility label keys** (all managed in CMS, with fallback in app translation files)

---

#### UI Text Translation Keys (82 keys)

These translations are used for regular UI text (clothing items, devices, colors, tutorial texts) and are also managed from CMS in the unified translations system.

#### Clothing Item Translations
| `customizer_clothing_dress1` | "Dress 1" |
| `customizer_clothing_dress2` | "Dress 2" |
| `customizer_clothing_dress3` | "Dress 3" |
| `customizer_clothing_longdressbelt` | "Long dress with belt" |
| `customizer_clothing_shortandshirt1` | "Shorts and shirt 1" |
| `customizer_clothing_shortandshirt2` | "Shorts and shirt 2" |
| `customizer_clothing_shortandshirt3` | "Shorts and shirt 3" |
| `customizer_clothing_skirtandshirt` | "Skirt and shirt" |
| `customizer_clothing_shirtandpants` | "Shirt and pants" |
| `customizer_clothing_blazer1` | "Blazer 1" |
| `customizer_clothing_blazer2` | "Blazer 2" |
| `customizer_clothing_jumper` | "Jumper" |
| `customizer_clothing_cape` | "Cape" |
| `customizer_clothing_hijab` | "Hijab" |
| `customizer_clothing_longuniform` | "Long uniform" |
| `customizer_clothing_traditional1` | "Traditional outfit 1" |
| `customizer_clothing_traditional2` | "Traditional outfit 2" |
| `customizer_clothing_traditional3` | "Traditional outfit 3" |
| `customizer_clothing_traditional4` | "Traditional outfit 4" |
| `customizer_clothing_traditional5` | "Traditional outfit 5" |
| **Personal Item (Device) Translations** | |
| `customizer_device_glasses` | "Glasses" |
| `customizer_device_readingglasses2` | "Reading glasses" |
| `customizer_device_darkglasses` | "Dark glasses" |
| `customizer_device_sunglass1` | "Sunglasses 1" |
| `customizer_device_sunglass2` | "Sunglasses 2" |
| `customizer_device_crown` | "Crown" |
| `customizer_device_hat` | "Hat" |
| `customizer_device_beanie` | "Beanie" |
| `customizer_device_beanie2` | "Beanie 2" |
| `customizer_device_buckethat` | "Bucket hat" |
| `customizer_device_cap` | "Cap" |
| `customizer_device_sunhat` | "Sun hat" |
| `customizer_device_headband` | "Headband" |
| `customizer_device_head` | "Head accessory" |
| `customizer_device_flowers` | "Flowers" |
| `customizer_device_bandana` | "Bandana" |
| `customizer_device_headphones` | "Headphones" |
| `customizer_device_necklace1` | "Necklace 1" |
| `customizer_device_necklace2` | "Necklace 2" |
| `customizer_device_necklace3` | "Necklace 3" |
| `customizer_device_earings` | "Earrings" |
| `customizer_device_purse` | "Purse" |
| `customizer_device_cane` | "Cane" |
| `customizer_device_prostetic1` | "Prosthetic 1" |
| `customizer_device_prostetic2` | "Prosthetic 2" |

#### Skin Color Translations
| `customizer_skin_color_light_pink` | "Light pink" |
| `customizer_skin_color_peach` | "Peach" |
| `customizer_skin_color_beige` | "Beige" |
| `customizer_skin_color_tan` | "Tan" |
| `customizer_skin_color_dark_brown` | "Dark brown" |
| `customizer_skin_color_light_tan` | "Light tan" |
| `customizer_skin_color_medium_brown` | "Medium brown" |
| `customizer_skin_color_cream` | "Cream" |
| `customizer_skin_color_bronze` | "Bronze" |
| `customizer_skin_color_ivory` | "Ivory" |
| `customizer_skin_color_sand` | "Sand" |
| `customizer_skin_color_caramel` | "Caramel" |
| `customizer_skin_color_unknown` | "Unknown skin color" |

#### Hair Color Translations
| `customizer_hair_color_black` | "Black" |
| `customizer_hair_color_brown` | "Brown" |
| `customizer_hair_color_red` | "Red" |
| `customizer_hair_color_blonde` | "Blonde" |
| `customizer_hair_color_green` | "Green" |
| `customizer_hair_color_pink` | "Pink" |
| `customizer_hair_color_orange` | "Orange" |
| `customizer_hair_color_purple` | "Purple" |
| `customizer_hair_color_dark_brown` | "Dark brown" |
| `customizer_hair_color_bright_orange` | "Bright orange" |
| `customizer_hair_color_blue` | "Blue" |
| `customizer_hair_color_unknown` | "Unknown hair color" |

#### Eye Color Translations
| `customizer_eye_color_black` | "Black" |
| `customizer_eye_color_brown` | "Brown" |
| `customizer_eye_color_hazel` | "Hazel" |
| `customizer_eye_color_green` | "Green" |
| `customizer_eye_color_blue` | "Blue" |
| `customizer_eye_color_gray` | "Gray" |
| `customizer_eye_color_unknown` | "Unknown eye color" |

#### Tutorial Text Translations
| Translation Key | English Value |
|----------------|---------------|
| `customizer_tutorial_title` | "How to create your Oky friend" |
| `customizer_tutorial_step1_title` | "Start creating your Oky friend!" |
| `customizer_tutorial_step1_text` | "Tap the buttons (Body, Hair, Eyes, Clothes and Personal items) to create your own friend.\n\nYou can move between buttons and see changes right away" |
| `customizer_tutorial_step2_title` | "Select colors" |
| `customizer_tutorial_step2_text` | "Tap the color buttons to change the skin, hair or eye color.\n\nUse the arrows or swipe to see more options. Tap to choose a color." |
| `customizer_tutorial_step3_title` | "Look at more options" |
| `customizer_tutorial_step3_text` | "To see more options, use the arrows or swipe for more colors." |
| `customizer_tutorial_step4_title` | "Personal items" |
| `customizer_tutorial_step4_text` | "Add one or more personal items for your Oky friend." |
| `customizer_tutorial_step5_title` | "Done?" |
| `customizer_tutorial_step5_text` | "Tap 'Save your friend' to save your changes.\nTap 'Exit' to exit. Your last change will not be saved.\n\nDon't worry, you can always come back and change your Oky friend." |

**Total: 82 UI text translation keys** (all managed in CMS, with fallback in app translation files)

**Grand Total: 116 translation keys** (34 accessibility labels + 82 UI text translations) × 5 languages = 580 entries in CMS

---

### iOS-Specific Behavior

On iOS, all accessibility labels are automatically appended with the accessibility prompt:
- Format: `{label}. {accessibility_prompt}`
- Example: "Select avatar: friend, tap to customize. Double tap to activate."

The `accessibility_prompt` translation key should be defined in all language files.

---

## Implementation Notes

1. **Dynamic Labels**: Many labels are constructed dynamically by concatenating translation keys with status information (e.g., "selected", "tap to select").

2. **Platform Differences**: iOS automatically appends an accessibility prompt to all labels, while Android does not.

3. **Role Attributes**: Interactive elements use `accessibilityRole` prop:
   - `button` - For all buttons and touchable elements
   - `text` - For text input fields

4. **Status Information**: Labels include contextual information about the current state:
   - Selection status (selected/not selected)
   - Color names (for skin, hair, and eye colors - now using descriptive names instead of numbers)
   - Item names (for avatars, themes, options)

5. **Translation Coverage**: All accessibility labels are managed from CMS and available for all supported locales:
   - English (en)
   - French (fr)
   - Spanish (es)
   - Portuguese (pt)
   - Russian (ru)
   - And other locales as configured in CMS
   - **Fallback**: Static translations in `app/src/resources/translations/app/{locale}.ts` are used if translations are not found in CMS
   - **Initial Data**: All translations are pre-populated in the database via SQL migration `1760000000000-create-translations-table.sql`
   - **Total Translations**: 116 unique translation keys × 5 languages = 580 translation entries

---

## Testing Checklist

- [ ] All interactive elements have accessibility labels
- [ ] Labels are descriptive and provide context
- [ ] Labels work correctly with screen readers (VoiceOver on iOS, TalkBack on Android)
- [ ] Dynamic labels correctly reflect current state
- [ ] All translations are present in all language files
- [ ] iOS accessibility prompts are working correctly
- [ ] Navigation between elements is logical with screen readers

---

**Document Version**: 1.2  
**Last Updated**: Updated to reflect implementation of color name translations for skin, hair, and eye colors  
**Maintained By**: Development Team

## Implementation Status

- ✅ **Clothing Item Translations**: Implemented - All 17 clothing items now use translated names
- ✅ **Personal Item Translations**: Implemented - All 25 personal items now use translated names
- ✅ **Color Name Translations**: Implemented - All skin, hair, and eye colors now use descriptive translated names instead of numbers
  - **Skin Colors**: 12 colors (Light pink, Peach, Beige, Tan, Dark brown, Light tan, Medium brown, Cream, Bronze, Ivory, Sand, Caramel)
  - **Hair Colors**: 11 colors (Black, Brown, Red, Blonde, Green, Pink, Orange, Purple, Dark brown, Bright orange, Blue)
  - **Eye Colors**: 6 colors (Black, Brown, Hazel, Green, Blue, Gray)
- ✅ **Translation Coverage**: All items translated in 5 languages (English, French, Spanish, Portuguese, Russian)

